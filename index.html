<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JoyTalk - ì¦ê±°ìš´ ì˜ì–´ í•™ìŠµ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Joy ë¸Œëœë“œ ì»¬ëŸ¬ */
        :root {
            --joy-primary: #FF6B9D;
            --joy-secondary: #FFA07A;
            --joy-accent: #FFD93D;
            --joy-success: #6BCB77;
            --joy-info: #4D96FF;
        }
        
        .joy-gradient {
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA07A 50%, #FFD93D 100%);
        }
        
        .joy-text-gradient {
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .joy-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .joy-card {
            transition: all 0.3s ease;
        }
        
        .joy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.2);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Components
        function StudyDashboard() {
            const [studyStats] = useState({
                totalStudyTime: 0,
                wordsLearned: 0,
                currentStreak: 0,
                completedLessons: 0
            });

            const learningLevel = localStorage.getItem('learningLevel') || 'ë¯¸ì„¤ì •';
            
            // í•™ìŠµ ëª©í‘œ ê´€ë¦¬
            const defaultGoals = [
                { id: 1, text: 'ë‹¨ì–´ 10ê°œ í•™ìŠµí•˜ê¸°', icon: '', color: 'gray', completed: false },
                { id: 2, text: 'AI íŠœí„°ì™€ ëŒ€í™” 5ë¶„', icon: '', color: 'gray', completed: false },
                { id: 3, text: 'ë‹¨ì–´ í€´ì¦ˆ í’€ê¸°', icon: '', color: 'gray', completed: false }
            ];
            
            const [goals, setGoals] = useState(() => {
                const saved = localStorage.getItem('studyGoals');
                return saved ? JSON.parse(saved) : defaultGoals;
            });
            
            const [showAddGoal, setShowAddGoal] = useState(false);
            const [newGoalText, setNewGoalText] = useState('');

            const toggleGoal = (id) => {
                const updatedGoals = goals.map(goal => 
                    goal.id === id ? { ...goal, completed: !goal.completed } : goal
                );
                setGoals(updatedGoals);
                localStorage.setItem('studyGoals', JSON.stringify(updatedGoals));
            };

            const addGoal = () => {
                if (newGoalText.trim()) {
                    const newGoal = {
                        id: Date.now(),
                        text: newGoalText,
                        icon: '',
                        color: 'gray',
                        completed: false
                    };
                    const updatedGoals = [...goals, newGoal];
                    setGoals(updatedGoals);
                    localStorage.setItem('studyGoals', JSON.stringify(updatedGoals));
                    setNewGoalText('');
                    setShowAddGoal(false);
                }
            };

            const deleteGoal = (id) => {
                const updatedGoals = goals.filter(goal => goal.id !== id);
                setGoals(updatedGoals);
                localStorage.setItem('studyGoals', JSON.stringify(updatedGoals));
            };

            const resetGoals = () => {
                setGoals(defaultGoals);
                localStorage.setItem('studyGoals', JSON.stringify(defaultGoals));
            };

            return (
                <div className="space-y-6">
                    {/* ì‹¬í”Œí•œ í—¤ë” ì„¹ì…˜ */}
                    <div className="bg-gradient-to-r from-gray-800 to-gray-900 rounded-lg p-6 shadow-md">
                        <div className="flex items-center justify-between">
                            <div>
                                <h2 className="text-2xl font-bold text-white mb-1">ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹</h2>
                                <p className="text-sm text-gray-300">ì˜¤ëŠ˜ë„ ì˜ì–´ í•™ìŠµì„ ì‹œì‘í•´ë³¼ê¹Œìš”?</p>
                            </div>
                            <div className="flex gap-4">
                                <div className="text-center bg-white/10 backdrop-blur-sm rounded-lg px-5 py-3 border border-white/20 min-w-[80px]">
                                    <div className="text-xs text-gray-300 uppercase tracking-wide">ë ˆë²¨</div>
                                    <div className="text-xl font-bold text-white mt-1">{learningLevel}</div>
                                </div>
                                <div className="text-center bg-white/10 backdrop-blur-sm rounded-lg px-5 py-3 border border-white/20 min-w-[80px]">
                                    <div className="text-xs text-gray-300 uppercase tracking-wide">í¬ì¸íŠ¸</div>
                                    <div className="text-xl font-bold text-pink-400 mt-1">{localStorage.getItem('joyPoints') || 0}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* í†µê³„ ì¹´ë“œ - ì‹¬í”Œ ë²„ì „ */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md transition">
                            <div className="text-xs font-medium text-gray-500 uppercase tracking-wide mb-2">í•™ìŠµ ì‹œê°„</div>
                            <div className="flex items-baseline gap-2">
                                <div className="text-3xl font-bold text-gray-900">{studyStats.totalStudyTime}</div>
                                <div className="text-sm text-gray-500">ë¶„</div>
                            </div>
                            <div className="text-xs text-gray-400 mt-1">ì´ë²ˆ ì£¼</div>
                        </div>
                        
                        <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md transition">
                            <div className="text-xs font-medium text-gray-500 uppercase tracking-wide mb-2">í•™ìŠµ ë‹¨ì–´</div>
                            <div className="flex items-baseline gap-2">
                                <div className="text-3xl font-bold text-gray-900">{studyStats.wordsLearned}</div>
                                <div className="text-sm text-gray-500">ê°œ</div>
                            </div>
                            <div className="text-xs text-gray-400 mt-1">ì „ì²´ ëˆ„ì </div>
                        </div>
                        
                        <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md transition">
                            <div className="text-xs font-medium text-gray-500 uppercase tracking-wide mb-2">ì—°ì† í•™ìŠµ</div>
                            <div className="flex items-baseline gap-2">
                                <div className="text-3xl font-bold text-gray-900">{studyStats.currentStreak}</div>
                                <div className="text-sm text-gray-500">ì¼</div>
                            </div>
                            <div className="text-xs text-gray-400 mt-1">Keep going! ğŸ”¥</div>
                        </div>
                        
                        <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 hover:shadow-md transition">
                            <div className="text-xs font-medium text-gray-500 uppercase tracking-wide mb-2">ì™„ë£Œ ë ˆìŠ¨</div>
                            <div className="flex items-baseline gap-2">
                                <div className="text-3xl font-bold text-gray-900">{studyStats.completedLessons}</div>
                                <div className="text-sm text-gray-500">ê°œ</div>
                            </div>
                            <div className="text-xs text-gray-400 mt-1">ì´ë²ˆ ë‹¬</div>
                        </div>
                    </div>

                    {/* ì˜¤ëŠ˜ì˜ ëª©í‘œ & ì¶”ì²œ í™œë™ */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                        {/* ì˜¤ëŠ˜ì˜ ëª©í‘œ */}
                        <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-lg font-bold text-gray-800">
                                    ì˜¤ëŠ˜ì˜ ëª©í‘œ
                                </h3>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setShowAddGoal(!showAddGoal)}
                                        className="px-3 py-1 bg-gray-800 text-white text-xs rounded-md hover:bg-gray-900 transition"
                                    >
                                        + ì¶”ê°€
                                    </button>
                                    <button
                                        onClick={resetGoals}
                                        className="px-3 py-1 bg-gray-200 text-gray-600 text-xs rounded-md hover:bg-gray-300 transition"
                                        title="ì´ˆê¸°í™”"
                                    >
                                        â†»
                                    </button>
                                </div>
                            </div>

                            {/* ëª©í‘œ ì¶”ê°€ ì…ë ¥ì°½ */}
                            {showAddGoal && (
                                <div className="mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200">
                                    <input
                                        type="text"
                                        value={newGoalText}
                                        onChange={(e) => setNewGoalText(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && addGoal()}
                                        placeholder="ìƒˆë¡œìš´ ëª©í‘œë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                                    />
                                    <div className="flex gap-2">
                                        <button
                                            onClick={addGoal}
                                            className="px-4 py-2 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-900 transition"
                                        >
                                            ì¶”ê°€
                                        </button>
                                        <button
                                            onClick={() => {
                                                setShowAddGoal(false);
                                                setNewGoalText('');
                                            }}
                                            className="px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300 transition"
                                        >
                                            ì·¨ì†Œ
                                        </button>
                                    </div>
                                </div>
                            )}
                            
                            <div className="space-y-2">
                                {goals.length === 0 ? (
                                    <div className="text-center py-8 text-gray-400 text-sm">
                                        ëª©í‘œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”
                                    </div>
                                ) : (
                                    goals.map((goal, index) => (
                                        <div 
                                            key={goal.id}
                                            className={`flex items-center p-3 rounded-lg border transition ${
                                                goal.completed 
                                                    ? 'bg-gray-50 border-gray-200' 
                                                    : 'bg-white border-gray-200 hover:border-gray-300'
                                            }`}
                                        >
                                            <button
                                                onClick={() => toggleGoal(goal.id)}
                                                className={`w-6 h-6 rounded-md flex items-center justify-center text-xs font-medium mr-3 transition ${
                                                    goal.completed
                                                        ? 'bg-green-500 text-white'
                                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-300'
                                                }`}
                                            >
                                                {goal.completed ? 'âœ“' : index + 1}
                                            </button>
                                            <div className="flex-1">
                                                <div className={`text-sm ${goal.completed ? 'line-through text-gray-400' : 'text-gray-700'}`}>
                                                    {goal.text}
                                                </div>
                                            </div>
                                            <button
                                                onClick={() => deleteGoal(goal.id)}
                                                className="ml-2 text-gray-400 hover:text-red-500 transition text-sm"
                                                title="ì‚­ì œ"
                                            >
                                                âœ•
                                            </button>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>

                        {/* ì¶”ì²œ í™œë™ */}
                        <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                            <h3 className="text-lg font-bold text-gray-800 mb-4">
                                ì¶”ì²œ í•™ìŠµ í™œë™
                            </h3>
                            <div className="space-y-3">
                                <div className="p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition">
                                    <div className="font-medium text-gray-800 mb-1 text-sm">ë ˆë²¨ë³„ ë‹¨ì–´ í•™ìŠµ</div>
                                    <p className="text-xs text-gray-600">í˜„ì¬ ë ˆë²¨ì— ë§ëŠ” ë‹¨ì–´ë¥¼ í•™ìŠµí•˜ì„¸ìš”</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition">
                                    <div className="font-medium text-gray-800 mb-1 text-sm">ìƒí™©ë³„ í‘œí˜„ ë°°ìš°ê¸°</div>
                                    <p className="text-xs text-gray-600">AI íŠœí„°ì—ê²Œ ë‹¤ì–‘í•œ ìƒí™©ì„ ë¬¼ì–´ë³´ì„¸ìš”</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-gray-300 transition">
                                    <div className="font-medium text-gray-800 mb-1 text-sm">í€´ì¦ˆë¡œ ì‹¤ë ¥ í…ŒìŠ¤íŠ¸</div>
                                    <p className="text-xs text-gray-600">ë°°ìš´ ë‹¨ì–´ë¥¼ í€´ì¦ˆë¡œ í™•ì¸í•´ë³´ì„¸ìš”</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* í•™ìŠµ íŒ */}
                    <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 border-l-4 border-l-pink-500">
                        <div className="flex items-start gap-3">
                            <div className="text-2xl">ğŸ’¡</div>
                            <div>
                                <h4 className="font-bold text-base text-gray-900 mb-2">ì˜¤ëŠ˜ì˜ íŒ</h4>
                                <p className="text-sm leading-relaxed text-gray-700">
                                    ë§¤ì¼ ê¾¸ì¤€íˆ í•™ìŠµí•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ë£¨ 15ë¶„ë§Œ íˆ¬ìí•´ë„ ì¶©ë¶„í•´ìš”. 
                                    <span className="font-medium text-pink-500"> í•¨ê»˜ ì¦ê²ê²Œ ë°°ì›Œë´ìš”!</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function VocabularyLearning() {
            const learningLevel = localStorage.getItem('learningLevel') || 'ì¤‘ê¸‰';
            
            // ë ˆë²¨ë³„ ë‹¨ì–´ ë°ì´í„°
            const vocabularyByLevel = {
                'ì´ˆê¸‰': [
                    { id: 1, word: 'Happy', meaning: 'í–‰ë³µí•œ', example: 'I am happy to see you.', learned: false },
                    { id: 2, word: 'Tired', meaning: 'í”¼ê³¤í•œ', example: 'I feel tired today.', learned: false },
                    { id: 3, word: 'Hungry', meaning: 'ë°°ê³ í”ˆ', example: 'Are you hungry?', learned: false },
                    { id: 4, word: 'Easy', meaning: 'ì‰¬ìš´', example: 'This test is easy.', learned: false },
                    { id: 5, word: 'Friend', meaning: 'ì¹œêµ¬', example: 'She is my best friend.', learned: false },
                    { id: 6, word: 'House', meaning: 'ì§‘', example: 'I live in a big house.', learned: false },
                    { id: 7, word: 'Beautiful', meaning: 'ì•„ë¦„ë‹¤ìš´', example: 'What a beautiful day!', learned: false },
                    { id: 8, word: 'Important', meaning: 'ì¤‘ìš”í•œ', example: 'This is very important.', learned: false }
                ],
                'ì¤‘ê¸‰': [
                    { id: 1, word: 'Achieve', meaning: 'ë‹¬ì„±í•˜ë‹¤', example: 'I want to achieve my goals.', learned: false },
                    { id: 2, word: 'Curious', meaning: 'í˜¸ê¸°ì‹¬ ìˆëŠ”', example: 'I am curious about your story.', learned: false },
                    { id: 3, word: 'Efficient', meaning: 'íš¨ìœ¨ì ì¸', example: 'She works in an efficient way.', learned: false },
                    { id: 4, word: 'Perspective', meaning: 'ê´€ì , ì‹œê°', example: 'Try to see things from my perspective.', learned: false },
                    { id: 5, word: 'Recommend', meaning: 'ì¶”ì²œí•˜ë‹¤', example: 'I recommend this restaurant.', learned: false },
                    { id: 6, word: 'Necessary', meaning: 'í•„ìš”í•œ', example: 'Sleep is necessary for health.', learned: false },
                    { id: 7, word: 'Experience', meaning: 'ê²½í—˜', example: 'I have no experience in this field.', learned: false },
                    { id: 8, word: 'Opportunity', meaning: 'ê¸°íšŒ', example: 'This is a great opportunity.', learned: false }
                ],
                'ê³ ê¸‰': [
                    { id: 1, word: 'Serendipity', meaning: 'ëœ»ë°–ì˜ í–‰ìš´', example: 'Finding this cafe was pure serendipity.', learned: false },
                    { id: 2, word: 'Ephemeral', meaning: 'ë§ì—†ëŠ”, ì¼ì‹œì ì¸', example: 'The beauty of cherry blossoms is ephemeral.', learned: false },
                    { id: 3, word: 'Eloquent', meaning: 'ì›…ë³€ì˜, ì„¤ë“ë ¥ ìˆëŠ”', example: 'She gave an eloquent speech.', learned: false },
                    { id: 4, word: 'Resilient', meaning: 'íšŒë³µë ¥ì´ ìˆëŠ”', example: 'Children are remarkably resilient.', learned: false },
                    { id: 5, word: 'Ambiguous', meaning: 'ì• ë§¤í•œ, ëª¨í˜¸í•œ', example: 'His answer was quite ambiguous.', learned: false },
                    { id: 6, word: 'Diligent', meaning: 'ë¶€ì§€ëŸ°í•œ, ì„±ì‹¤í•œ', example: 'She is a diligent student.', learned: false },
                    { id: 7, word: 'Inevitable', meaning: 'í”¼í•  ìˆ˜ ì—†ëŠ”', example: 'Change is inevitable.', learned: false },
                    { id: 8, word: 'Comprehend', meaning: 'ì´í•´í•˜ë‹¤', example: 'It is hard to comprehend this theory.', learned: false }
                ]
            };

            const vocabularyCards = vocabularyByLevel[learningLevel] || vocabularyByLevel['ì¤‘ê¸‰'];

            const [expandedId, setExpandedId] = useState(null);
            const [activeTab, setActiveTab] = useState('list');
            const [quizIndex, setQuizIndex] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [score, setScore] = useState(0);
            const [options, setOptions] = useState([]);

            // í€´ì¦ˆ ì˜µì…˜ ìƒì„±
            const generateOptions = (correctAnswer, allCards) => {
                const wrongAnswers = allCards
                    .filter(card => card.meaning !== correctAnswer)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3)
                    .map(card => card.meaning);
                
                const allOptions = [...wrongAnswers, correctAnswer];
                return allOptions.sort(() => Math.random() - 0.5);
            };

            const handleAnswerSelect = (answer) => {
                setSelectedAnswer(answer);
                setShowResult(true);
                if (answer === vocabularyCards[quizIndex].meaning) {
                    setScore(score + 1);
                }
            };

            const handleNextQuiz = () => {
                if (quizIndex < vocabularyCards.length - 1) {
                    setQuizIndex(quizIndex + 1);
                    setSelectedAnswer(null);
                    setShowResult(false);
                    setOptions(generateOptions(vocabularyCards[quizIndex + 1].meaning, vocabularyCards));
                } else {
                    alert(`í€´ì¦ˆ ì™„ë£Œ! ìµœì¢… ì ìˆ˜: ${score + (selectedAnswer === vocabularyCards[quizIndex].meaning ? 1 : 0)}/${vocabularyCards.length}`);
                    setQuizIndex(0);
                    setScore(0);
                    setSelectedAnswer(null);
                    setShowResult(false);
                    setOptions(generateOptions(vocabularyCards[0].meaning, vocabularyCards));
                }
            };

            // í€´ì¦ˆ ì‹œì‘ ì‹œ ì˜µì…˜ ì´ˆê¸°í™”
            React.useEffect(() => {
                if (activeTab === 'quiz' && options.length === 0) {
                    setOptions(generateOptions(vocabularyCards[quizIndex].meaning, vocabularyCards));
                }
            }, [activeTab]);

            return (
                <div className="space-y-6">
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-3xl font-bold text-gray-800">ğŸ“– ì–´íœ˜ í•™ìŠµ</h2>
                        <div className="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-full font-medium">
                            {learningLevel} ë ˆë²¨
                        </div>
                    </div>
                    
                    {/* Tabs */}
                    <div className="flex gap-4 border-b border-gray-200">
                        <button
                            onClick={() => setActiveTab('list')}
                            className={`px-4 py-2 font-medium transition-colors ${
                                activeTab === 'list'
                                    ? 'text-blue-600 border-b-2 border-blue-600'
                                    : 'text-gray-600 hover:text-blue-600'
                            }`}
                        >
                            ğŸ“š ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸
                        </button>
                        <button
                            onClick={() => {
                                setActiveTab('quiz');
                                setQuizIndex(0);
                                setScore(0);
                                setShowAnswer(false);
                            }}
                            className={`px-4 py-2 font-medium transition-colors ${
                                activeTab === 'quiz'
                                    ? 'text-blue-600 border-b-2 border-blue-600'
                                    : 'text-gray-600 hover:text-blue-600'
                            }`}
                        >
                            âœï¸ ë‹¨ì–´ í€´ì¦ˆ
                        </button>
                    </div>

                    {/* ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ */}
                    {activeTab === 'list' && (
                        <>
                            <div className="grid gap-4">
                                {vocabularyCards.map((card) => (
                                    <div 
                                        key={card.id}
                                        className="bg-white border-2 border-gray-200 rounded-lg p-5 hover:border-indigo-400 transition-all cursor-pointer"
                                        onClick={() => setExpandedId(expandedId === card.id ? null : card.id)}
                                    >
                                        <div className="flex items-center justify-between">
                                            <div className="flex-1">
                                                <div className="flex items-center gap-3">
                                                    <span className="text-2xl font-bold text-indigo-600">{card.word}</span>
                                                    {expandedId === card.id && (
                                                        <span className="text-lg text-gray-600">- {card.meaning}</span>
                                                    )}
                                                </div>
                                                {expandedId === card.id && (
                                                    <div className="mt-3 pt-3 border-t border-gray-200">
                                                        <p className="text-gray-700 italic">"{card.example}"</p>
                                                    </div>
                                                )}
                                            </div>
                                            <div className="text-gray-400">
                                                {expandedId === card.id ? 'â–²' : 'â–¼'}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                                <p className="text-sm text-gray-700">
                                    ğŸ’¡ <strong>íŒ:</strong> ê° ë‹¨ì–´ë¥¼ í´ë¦­í•˜ë©´ ëœ»ê³¼ ì˜ˆë¬¸ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </>
                    )}

                    {/* ë‹¨ì–´ í€´ì¦ˆ */}
                    {activeTab === 'quiz' && (
                        <div className="max-w-2xl mx-auto">
                            <div className="bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-8 text-white shadow-2xl">
                                <div className="flex justify-between items-center mb-6">
                                    <span className="text-sm opacity-90">ë¬¸ì œ {quizIndex + 1} / {vocabularyCards.length}</span>
                                    <span className="text-sm font-bold bg-white/20 px-4 py-1 rounded-full">ì ìˆ˜: {score}</span>
                                </div>
                                
                                <div className="space-y-6">
                                    <div className="text-center">
                                        <div className="text-5xl font-bold mb-2">
                                            {vocabularyCards[quizIndex].word}
                                        </div>
                                        <div className="text-lg opacity-90">
                                            ì´ ë‹¨ì–´ì˜ ëœ»ì€?
                                        </div>
                                    </div>

                                    {/* ê°ê´€ì‹ ë³´ê¸° */}
                                    <div className="space-y-3">
                                        {options.map((option, idx) => {
                                            const isSelected = selectedAnswer === option;
                                            const isCorrect = option === vocabularyCards[quizIndex].meaning;
                                            let buttonClass = 'w-full p-4 rounded-lg font-medium transition text-left ';
                                            
                                            if (!showResult) {
                                                buttonClass += 'bg-white/10 hover:bg-white/20 border-2 border-white/30';
                                            } else if (isSelected && isCorrect) {
                                                buttonClass += 'bg-green-500 border-2 border-green-300';
                                            } else if (isSelected && !isCorrect) {
                                                buttonClass += 'bg-red-500 border-2 border-red-300';
                                            } else if (isCorrect) {
                                                buttonClass += 'bg-green-500 border-2 border-green-300';
                                            } else {
                                                buttonClass += 'bg-white/10 border-2 border-white/30 opacity-50';
                                            }
                                            
                                            return (
                                                <button
                                                    key={idx}
                                                    onClick={() => !showResult && handleAnswerSelect(option)}
                                                    disabled={showResult}
                                                    className={buttonClass}
                                                >
                                                    <span className="text-lg">
                                                        {String.fromCharCode(65 + idx)}. {option}
                                                    </span>
                                                </button>
                                            );
                                        })}
                                    </div>

                                    {/* ê²°ê³¼ ë° ì˜ˆë¬¸ */}
                                    {showResult && (
                                        <div className="space-y-4 pt-4 border-t border-white/30">
                                            <div className="text-center">
                                                {selectedAnswer === vocabularyCards[quizIndex].meaning ? (
                                                    <div className="text-2xl font-bold text-green-200">âœ“ ì •ë‹µì…ë‹ˆë‹¤!</div>
                                                ) : (
                                                    <div className="text-2xl font-bold text-red-200">âœ— í‹€ë ¸ìŠµë‹ˆë‹¤!</div>
                                                )}
                                            </div>
                                            <div className="bg-white/10 rounded-lg p-4">
                                                <div className="text-sm opacity-75 mb-1">ì˜ˆë¬¸:</div>
                                                <div className="italic">"{vocabularyCards[quizIndex].example}"</div>
                                            </div>
                                            <button
                                                onClick={handleNextQuiz}
                                                className="w-full px-6 py-3 bg-white text-purple-600 rounded-lg font-bold hover:bg-gray-100 transition"
                                            >
                                                {quizIndex < vocabularyCards.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'ê²°ê³¼ ë³´ê¸°'}
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function AITutorChat() {
            const [activeTab, setActiveTab] = useState('chat'); // 'chat' or 'roleplay'
            const [messages, setMessages] = useState([
                { role: 'assistant', content: 'ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” Joyì˜ˆìš”! ğŸ˜Šâœ¨\n\nì˜ì–´ í•™ìŠµì„ ì¦ê²ê²Œ ë„ì™€ë“œë¦´ê²Œìš”!\n\nì €ì—ê²Œ ì´ë ‡ê²Œ ë¬¼ì–´ë³´ì„¸ìš”:\nâ€¢ "ì‹ë‹¹ì—ì„œ" - ìƒí™©ë³„ ì˜ì–´ í‘œí˜„\nâ€¢ "ë°°ê³ íŒŒ" - í•œêµ­ì–´ë¥¼ ì˜ì–´ë¡œ ë²ˆì—­\nâ€¢ "ê³¼ê±°ì™„ë£Œ ì„¤ëª…í•´ì¤˜" - ë¬¸ë²• ì„¤ëª…\nâ€¢ "ì•ˆë…•" - ììœ ë¡œìš´ ëŒ€í™”\n\ní•¨ê»˜ ì¦ê²ê²Œ ë°°ì›Œë´ìš”! ğŸ’•' }
            ]);
            const [inputMessage, setInputMessage] = useState('');
            
            // ë¡¤í”Œë ˆì‰ ìƒíƒœ
            const [selectedScenario, setSelectedScenario] = useState(null);
            const [conversation, setConversation] = useState([]);
            const [userInput, setUserInput] = useState('');
            const [currentStep, setCurrentStep] = useState(0);

            // ìƒí™©ë³„ ì˜ì–´ í‘œí˜„ ë°ì´í„°ë² ì´ìŠ¤
            const situationExpressions = {
                'ì‹ë‹¹': [
                    'ğŸ“ "Can I see the menu, please?" - ë©”ë‰´íŒ ì¢€ ë³¼ ìˆ˜ ìˆì„ê¹Œìš”?',
                    'ğŸ“ "I\'d like to order..." - ...ì„ ì£¼ë¬¸í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.',
                    'ğŸ“ "Could I have the bill, please?" - ê³„ì‚°ì„œ ì£¼ì„¸ìš”.',
                    'ğŸ“ "Is this spicy?" - ì´ê±° ë§¤ìš´ê°€ìš”?',
                    'ğŸ“ "Can I get this to go?" - í¬ì¥ ê°€ëŠ¥í•œê°€ìš”?'
                ],
                'ì£¼ë¬¸': [
                    'ğŸ“ "I\'d like to order..." - ...ì„ ì£¼ë¬¸í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.',
                    'ğŸ“ "Can I get...?" - ...ë¡œ ì£¼ì„¸ìš”.',
                    'ğŸ“ "I\'ll have the..." - ...ë¡œ í• ê²Œìš”.',
                    'ğŸ“ "Could you recommend something?" - ì¶”ì²œí•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?',
                    'ğŸ“ "How long will it take?" - ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?'
                ],
                'ë©´ì ‘': [
                    'ğŸ“ "Thank you for this opportunity." - ì´ ê¸°íšŒë¥¼ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.',
                    'ğŸ“ "I\'m very interested in this position." - ì´ ì§ì±…ì— ë§¤ìš° ê´€ì‹¬ì´ ìˆìŠµë‹ˆë‹¤.',
                    'ğŸ“ "My strength is..." - ì œ ê°•ì ì€ ...ì…ë‹ˆë‹¤.',
                    'ğŸ“ "I have experience in..." - ì €ëŠ” ...ì— ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤.',
                    'ğŸ“ "Could you tell me more about...?" - ...ì— ëŒ€í•´ ë” ë§ì”€í•´ì£¼ì‹œê² ì–´ìš”?'
                ],
                'ì‚¬ê³¼': [
                    'ğŸ“ "I\'m really sorry about..." - ...ì— ëŒ€í•´ ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤.',
                    'ğŸ“ "I apologize for..." - ...ì— ëŒ€í•´ ì‚¬ê³¼ë“œë¦½ë‹ˆë‹¤.',
                    'ğŸ“ "It was my mistake." - ì œ ì‹¤ìˆ˜ì˜€ìŠµë‹ˆë‹¤.',
                    'ğŸ“ "I didn\'t mean to..." - ...í•  ì˜ë„ëŠ” ì•„ë‹ˆì—ˆì–´ìš”.',
                    'ğŸ“ "Can you forgive me?" - ìš©ì„œí•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?'
                ],
                'ê°ì‚¬': [
                    'ğŸ“ "Thank you so much!" - ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤!',
                    'ğŸ“ "I really appreciate it." - ì •ë§ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.',
                    'ğŸ“ "That\'s very kind of you." - ì •ë§ ì¹œì ˆí•˜ì‹œë„¤ìš”.',
                    'ğŸ“ "I owe you one." - ì‹ ì„¸ ì¡ŒìŠµë‹ˆë‹¤.',
                    'ğŸ“ "Thanks for your help!" - ë„ì™€ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”!'
                ],
                'ì‡¼í•‘': [
                    'ğŸ“ "How much is this?" - ì´ê±° ì–¼ë§ˆì˜ˆìš”?',
                    'ğŸ“ "Can I try this on?" - ì…ì–´ë´ë„ ë ê¹Œìš”?',
                    'ğŸ“ "Do you have this in another size?" - ë‹¤ë¥¸ ì‚¬ì´ì¦ˆ ìˆë‚˜ìš”?',
                    'ğŸ“ "I\'m just looking, thanks." - ê·¸ëƒ¥ êµ¬ê²½ ì¤‘ì´ì—ìš”, ê°ì‚¬í•©ë‹ˆë‹¤.',
                    'ğŸ“ "Do you accept credit cards?" - ì¹´ë“œ ë˜ë‚˜ìš”?'
                ],
                'ê¸¸': [
                    'ğŸ“ "Excuse me, how do I get to...?" - ì‹¤ë¡€í•©ë‹ˆë‹¤, ...ì— ì–´ë–»ê²Œ ê°€ë‚˜ìš”?',
                    'ğŸ“ "Could you point me in the right direction?" - ë°©í–¥ ì¢€ ì•Œë ¤ì£¼ì‹œê² ì–´ìš”?',
                    'ğŸ“ "Is it far from here?" - ì—¬ê¸°ì„œ ë¨¼ê°€ìš”?',
                    'ğŸ“ "Can I walk there?" - ê±¸ì–´ê°ˆ ìˆ˜ ìˆë‚˜ìš”?',
                    'ğŸ“ "Where is the nearest subway station?" - ê°€ì¥ ê°€ê¹Œìš´ ì§€í•˜ì² ì—­ì´ ì–´ë””ì¸ê°€ìš”?'
                ],
                'í˜¸í…”': [
                    'ğŸ“ "I have a reservation under..." - ...ë¡œ ì˜ˆì•½í–ˆìŠµë‹ˆë‹¤.',
                    'ğŸ“ "What time is check-out?" - ì²´í¬ì•„ì›ƒ ì‹œê°„ì´ ì–¸ì œì¸ê°€ìš”?',
                    'ğŸ“ "Could I get a wake-up call?" - ëª¨ë‹ì½œ ë¶€íƒë“œë ¤ë„ ë ê¹Œìš”?',
                    'ğŸ“ "Is breakfast included?" - ì¡°ì‹ì´ í¬í•¨ë˜ì–´ ìˆë‚˜ìš”?',
                    'ğŸ“ "The wifi isn\'t working." - ì™€ì´íŒŒì´ê°€ ì•ˆ ë˜ë„¤ìš”.'
                ],
                'ì „í™”': [
                    'ğŸ“ "May I speak to...?" - ...ì™€ í†µí™”í•  ìˆ˜ ìˆì„ê¹Œìš”?',
                    'ğŸ“ "Could you speak more slowly?" - ì¢€ ë” ì²œì²œíˆ ë§ì”€í•´ì£¼ì‹œê² ì–´ìš”?',
                    'ğŸ“ "I\'ll call you back later." - ë‚˜ì¤‘ì— ë‹¤ì‹œ ì „í™”ë“œë¦´ê²Œìš”.',
                    'ğŸ“ "Can you hear me?" - ì œ ëª©ì†Œë¦¬ ë“¤ë¦¬ë‚˜ìš”?',
                    'ğŸ“ "Sorry, wrong number." - ì£„ì†¡í•©ë‹ˆë‹¤, ì˜ëª» ê±¸ì—ˆìŠµë‹ˆë‹¤.'
                ],
                'íšŒì˜': [
                    'ğŸ“ "Let\'s get started." - ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.',
                    'ğŸ“ "What do you think about...?" - ...ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ì‹œë‚˜ìš”?',
                    'ğŸ“ "I agree with..." - ...ì— ë™ì˜í•©ë‹ˆë‹¤.',
                    'ğŸ“ "Could you clarify that?" - ê·¸ê²ƒì„ ëª…í™•íˆ í•´ì£¼ì‹œê² ì–´ìš”?',
                    'ğŸ“ "Let\'s move on to the next topic." - ë‹¤ìŒ ì£¼ì œë¡œ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.'
                ]
            };

            const handleSendMessage = () => {
                if (!inputMessage.trim()) return;

                const userMsg = inputMessage.trim().toLowerCase();
                let response = '';

                // 1. ìƒí™©ë³„ í‘œí˜„ ê²€ìƒ‰
                const matchedSituations = [];
                for (const [situation, expressions] of Object.entries(situationExpressions)) {
                    if (userMsg.includes(situation)) {
                        matchedSituations.push({ situation, expressions });
                    }
                }

                if (matchedSituations.length > 0) {
                    response = matchedSituations.map(({ situation, expressions }) => 
                        `**${situation}ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í‘œí˜„ë“¤:**\n\n${expressions.join('\n')}`
                    ).join('\n\n---\n\n');
                }
                // 2. ë¬¸ë²• ì§ˆë¬¸ ì‘ë‹µ
                else if (userMsg.includes('ë¬¸ë²•') || userMsg.includes('ê³¼ê±°') || userMsg.includes('í˜„ì¬') || userMsg.includes('ë¯¸ë˜')) {
                    if (userMsg.includes('ê³¼ê±°ì™„ë£Œ') || userMsg.includes('had')) {
                        response = '**ê³¼ê±°ì™„ë£Œ ì‹œì œ (Past Perfect)**\n\ní˜•íƒœ: had + ê³¼ê±°ë¶„ì‚¬\n\nì‚¬ìš©:\nâ€¢ ê³¼ê±°ì˜ íŠ¹ì • ì‹œì ë³´ë‹¤ ë” ì´ì „ì— ì¼ì–´ë‚œ ì¼\nâ€¢ "I had finished my homework before dinner."\n  (ì €ë… ë¨¹ê¸° ì „ì— ìˆ™ì œë¥¼ ëëƒˆì—ˆë‹¤)\n\në” ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ë¬¼ì–´ë³´ì„¸ìš”!';
                    } else if (userMsg.includes('í˜„ì¬ì™„ë£Œ')) {
                        response = '**í˜„ì¬ì™„ë£Œ ì‹œì œ (Present Perfect)**\n\ní˜•íƒœ: have/has + ê³¼ê±°ë¶„ì‚¬\n\nì‚¬ìš©:\nâ€¢ ê³¼ê±°ì— ì‹œì‘ë˜ì–´ í˜„ì¬ê¹Œì§€ ê³„ì†ë˜ëŠ” ì¼\nâ€¢ ê³¼ê±°ì— ì¼ì–´ë‚¬ì§€ë§Œ í˜„ì¬ì™€ ê´€ë ¨ì´ ìˆëŠ” ì¼\n\nì˜ˆ: "I have lived here for 5 years."\n   (5ë…„ ë™ì•ˆ ì—¬ê¸° ì‚´ì•„ì™”ë‹¤)';
                    } else {
                        response = 'ë¬¸ë²•ì— ëŒ€í•´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?\n\në‹¤ìŒê³¼ ê°™ì´ êµ¬ì²´ì ìœ¼ë¡œ ë¬¼ì–´ë³´ì„¸ìš”:\nâ€¢ "ê³¼ê±°ì™„ë£Œ ì„¤ëª…í•´ì¤˜"\nâ€¢ "í˜„ì¬ì™„ë£ŒëŠ” ì–¸ì œ ì¨?"\nâ€¢ "to ë¶€ì •ì‚¬ì™€ ë™ëª…ì‚¬ ì°¨ì´"\nâ€¢ "ê´€ê³„ëŒ€ëª…ì‚¬ ì‚¬ìš©ë²•"';
                    }
                }
                // 3. ì˜ì‘ ì§ˆë¬¸ ë° ë²ˆì—­
                else if (userMsg.includes('ì˜ì–´ë¡œ') || userMsg.includes('ì˜ì‘') || userMsg.includes('ë²ˆì—­')) {
                    // êµ¬ì²´ì ì¸ ë²ˆì—­ ìš”ì²­ íŒ¨í„´ ì°¾ê¸°
                    const translationPatterns = [
                        { ko: ['ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì¢‹ë„¤ìš”', 'ë‚ ì”¨ê°€ ì¢‹ë„¤ìš”', 'ë‚ ì”¨ ì¢‹ë‹¤'], en: 'The weather is nice today.' },
                        { ko: ['ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤', 'ìˆ˜ê³ í•˜ì„¸ìš”', 'ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤'], en: 'Good job! / Thank you for your hard work.' },
                        { ko: ['ë¯¸ì•ˆí•˜ì§€ë§Œ ì•ˆ ë  ê²ƒ ê°™ì•„', 'ì•ˆ ë  ê²ƒ ê°™ì•„', 'ì–´ë ¤ìš¸ ê²ƒ ê°™ì•„'], en: 'I\'m sorry, but I don\'t think it will work.' },
                        { ko: ['ì˜ ì§€ë‚´?', 'ì˜ ì§€ë‚´', 'ì–´ë–»ê²Œ ì§€ë‚´'], en: 'How are you doing?' },
                        { ko: ['ì˜¤ëœë§Œì´ì•¼', 'ì˜¤ëœë§Œ', 'ì˜¤ëœë§Œì´ì—ìš”'], en: 'Long time no see!' },
                        { ko: ['ë­í•´?', 'ë­ í•´', 'ë­í•˜ë‹ˆ', 'ë­ í•˜ë‹ˆ'], en: 'What are you doing?' },
                        { ko: ['ë°°ê³ íŒŒ', 'ë°° ê³ íŒŒ', 'ë°°ê³ í”„ë‹¤'], en: 'I\'m hungry.' },
                        { ko: ['í”¼ê³¤í•´', 'í”¼ê³¤í•˜ë‹¤', 'í˜ë“¤ì–´'], en: 'I\'m tired.' },
                        { ko: ['ì‹œê°„ ìˆì–´?', 'ì‹œê°„ ìˆì–´', 'ì‹œê°„ ë˜?'], en: 'Do you have time?' },
                        { ko: ['ë‚˜ì¤‘ì— ë´', 'ë‚˜ì¤‘ì— ë³´ì', 'ë‹¤ìŒì— ë´'], en: 'See you later!' },
                        { ko: ['ë„ì™€ì¤„ê¹Œ?', 'ë„ì™€ì¤„ê¹Œ', 'ë„ì™€ë“œë¦´ê¹Œìš”'], en: 'Can I help you?' },
                        { ko: ['ê´œì°®ì•„', 'ê´œì°®ì•„ìš”', 'ê´œì°®ìŠµë‹ˆë‹¤'], en: 'It\'s okay. / I\'m fine.' },
                        { ko: ['ì˜í–ˆì–´', 'ì˜í–ˆë‹¤', 'ì˜í•˜ë„¤'], en: 'Good job! / Well done!' },
                        { ko: ['í™”ì´íŒ…', 'íŒŒì´íŒ…', 'í˜ë‚´'], en: 'You can do it! / Good luck!' },
                        { ko: ['ì¡°ì‹¬í•´', 'ì¡°ì‹¬í•˜ì„¸ìš”', 'ì•ˆì „í•˜ê²Œ'], en: 'Be careful! / Take care!' },
                        { ko: ['ê³ ë§ˆì›Œ', 'ê°ì‚¬í•©ë‹ˆë‹¤', 'ê³ ë§™ìŠµë‹ˆë‹¤', 'ê°ì‚¬í•´ìš”'], en: 'Thank you!' },
                        { ko: ['ë¯¸ì•ˆí•´', 'ì£„ì†¡í•©ë‹ˆë‹¤', 'ë¯¸ì•ˆí•©ë‹ˆë‹¤'], en: 'I\'m sorry.' },
                        { ko: ['ì‚¬ë‘í•´', 'ì‚¬ë‘í•©ë‹ˆë‹¤'], en: 'I love you.' },
                        { ko: ['ì¶•í•˜í•´', 'ì¶•í•˜í•©ë‹ˆë‹¤', 'ì¶•í•˜ë“œë ¤ìš”'], en: 'Congratulations!' },
                        { ko: ['ìƒì¼ ì¶•í•˜í•´', 'ìƒì¼ ì¶•í•˜í•©ë‹ˆë‹¤'], en: 'Happy birthday!' },
                        { ko: ['ì•ˆë…•', 'ì•ˆë…•í•˜ì„¸ìš”', 'ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ'], en: 'Hello! / Hi!' },
                        { ko: ['ì˜ê°€', 'ì˜ ê°€', 'ì•ˆë…•íˆ ê°€ì„¸ìš”'], en: 'Goodbye! / Bye!' },
                        { ko: ['ì¢‹ì•„', 'ì¢‹ì•„ìš”', 'ì¢‹ìŠµë‹ˆë‹¤'], en: 'Good! / I like it!' },
                        { ko: ['ì‹«ì–´', 'ì‹«ì–´ìš”', 'ì‹«ìŠµë‹ˆë‹¤'], en: 'I don\'t like it. / No, thanks.' },
                        { ko: ['ëª°ë¼', 'ëª¨ë¥´ê² ì–´', 'ëª¨ë¥´ê² ìŠµë‹ˆë‹¤'], en: 'I don\'t know.' },
                        { ko: ['ì•Œê² ì–´', 'ì•Œì•˜ì–´', 'ì•Œê² ìŠµë‹ˆë‹¤'], en: 'I understand. / Got it.' },
                        { ko: ['ë§ì•„', 'ê·¸ë˜', 'ë§ì•„ìš”'], en: 'That\'s right. / Yes.' },
                        { ko: ['ì•„ë‹ˆì•¼', 'ì•„ë‹ˆì—ìš”', 'ì•„ë‹™ë‹ˆë‹¤'], en: 'No. / That\'s not right.' },
                        { ko: ['ë¶€íƒí•´', 'ë¶€íƒë“œë¦½ë‹ˆë‹¤', 'ë¶€íƒí• ê²Œ'], en: 'Please. / I\'m asking you.' },
                        { ko: ['ì–´ë–»ê²Œ', 'ì–´ë–»ê²Œ í•´', 'ì–´ë–»ê²Œ í•˜ì§€'], en: 'How? / What should I do?' },
                        { ko: ['ì™œ?', 'ì™œìš”', 'ì™œ ê·¸ë˜'], en: 'Why? / What\'s wrong?' },
                        { ko: ['ì–¸ì œ?', 'ì–¸ì œìš”', 'ì–¸ì œì¸ê°€ìš”'], en: 'When?' },
                        { ko: ['ì–´ë””?', 'ì–´ë””ìš”', 'ì–´ë””ì˜ˆìš”'], en: 'Where?' },
                        { ko: ['ë­?', 'ë¬´ì—‡', 'ë­ë¼ê³ '], en: 'What?' },
                        { ko: ['ëˆ„êµ¬?', 'ëˆ„êµ¬ì˜ˆìš”', 'ëˆ„êµ¬ì„¸ìš”'], en: 'Who?' },
                        { ko: ['ì–¼ë§ˆ?', 'ì–¼ë§ˆì˜ˆìš”', 'ê°€ê²©ì´'], en: 'How much?' }
                    ];
                    
                    let found = false;
                    for (const pattern of translationPatterns) {
                        for (const variant of pattern.ko) {
                            if (inputMessage.includes(variant)) {
                                response = `**"${pattern.ko[0]}"ë¥¼ ì˜ì–´ë¡œ:**\n\nâœ¨ ${pattern.en}\n\nğŸ’¡ ë” ê¶ê¸ˆí•œ í‘œí˜„ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”!`;
                                found = true;
                                break;
                            }
                        }
                        if (found) break;
                    }
                    
                    if (!found) {
                        // í•œê¸€ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                        const hasKorean = /[ê°€-í£]/.test(inputMessage);
                        if (hasKorean) {
                            // "ì˜ì–´ë¡œ", "ë²ˆì—­", "ì˜ì‘" ì œê±°í•˜ê³  ì‹¤ì œ í•œêµ­ì–´ë§Œ ì¶”ì¶œ
                            const koreanText = inputMessage
                                .replace(/ì˜ì–´ë¡œ/g, '')
                                .replace(/ë²ˆì—­/g, '')
                                .replace(/ì˜ì‘/g, '')
                                .replace(/í•´ì¤˜/g, '')
                                .replace(/ì•Œë ¤ì¤˜/g, '')
                                .trim();
                            
                            response = `"${koreanText}"ì— ëŒ€í•œ ë²ˆì—­ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ğŸ˜¢\n\në” ë§ì€ í‘œí˜„ì„ ì¶”ê°€í•˜ê³  ìˆì–´ìš”!\n\ní˜„ì¬ ì§€ì›í•˜ëŠ” í‘œí˜„:\nâ€¢ ì¸ì‚¬: ì•ˆë…•, ì˜ê°€, ì˜¤ëœë§Œ\nâ€¢ ê°ì •: ë°°ê³ íŒŒ, í”¼ê³¤í•´, ì¢‹ì•„, ì‹«ì–´\nâ€¢ ê°ì‚¬/ì‚¬ê³¼: ê³ ë§ˆì›Œ, ë¯¸ì•ˆí•´\nâ€¢ ì§ˆë¬¸: ë­í•´? ì–´ë””? ì–¸ì œ? ì–¼ë§ˆ?\nâ€¢ ê¸°íƒ€: ì˜í–ˆì–´, í™”ì´íŒ…, ì¡°ì‹¬í•´\n\në‹¤ë¥¸ í‘œí˜„ì„ ì‹œë„í•´ë³´ì„¸ìš”!`;
                        } else {
                            response = 'ì˜ì‘ì„ ë„ì™€ë“œë¦´ê²Œìš”!\n\në²ˆì—­í•˜ê³  ì‹¶ì€ í•œêµ­ì–´ë¥¼ ê·¸ëƒ¥ ì…ë ¥í•˜ì‹œê±°ë‚˜ "~ë¥¼ ì˜ì–´ë¡œ" í˜•íƒœë¡œ ë¬¼ì–´ë³´ì„¸ìš”.\n\nì˜ˆì‹œ:\nâ€¢ "ë°°ê³ íŒŒ"\nâ€¢ "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì¢‹ë„¤ìš” ì˜ì–´ë¡œ"\nâ€¢ "ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤ ë²ˆì—­"\nâ€¢ "ê³ ë§ˆì›Œ"';
                        }
                    }
                }
                // 4. ì¸ì‚¬ ë° ì¼ìƒ ëŒ€í™”
                else if (userMsg.includes('ì•ˆë…•') || userMsg.includes('hello') || userMsg.includes('hi')) {
                    response = 'Hello! ë°˜ê°‘ìŠµë‹ˆë‹¤! ğŸ˜Š\n\nì˜ì–´ í•™ìŠµì„ ë„ì™€ë“œë¦´ê²Œìš”. ê¶ê¸ˆí•œ ì ì´ë‚˜ ë°°ìš°ê³  ì‹¶ì€ í‘œí˜„ì„ ììœ ë¡­ê²Œ ë¬¼ì–´ë³´ì„¸ìš”!';
                }
                else if (userMsg.includes('ê³ ë§ˆ') || userMsg.includes('ê°ì‚¬') || userMsg.includes('thanks')) {
                    response = 'You\'re welcome! ì²œë§Œì—ìš”! ğŸ˜Š\n\në” ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ì–¸ì œë“  ë§ì”€í•´ì£¼ì„¸ìš”!';
                }
                // 5. ê¸°íƒ€ ì§ˆë¬¸
                else {
                    response = `"${inputMessage}"ì— ëŒ€í•´ ë‹µë³€ë“œë¦´ê²Œìš”!\n\nì œê°€ ë„ìš¸ ìˆ˜ ìˆëŠ” ê²ƒë“¤:\n\nâ€¢ **ìƒí™©ë³„ í‘œí˜„**: "ì‹ë‹¹ì—ì„œ", "ë©´ì ‘ ë³¼ ë•Œ" ë“±\nâ€¢ **ë¬¸ë²• ì„¤ëª…**: "ê³¼ê±°ì™„ë£Œ ì„¤ëª…í•´ì¤˜"\nâ€¢ **ì˜ì‘ ë„ì›€**: "~ë¥¼ ì˜ì–´ë¡œ ë§í•˜ë©´?"\nâ€¢ **ì¼ìƒ ëŒ€í™”**: ììœ ë¡­ê²Œ ëŒ€í™”í•´ìš”!\n\në” êµ¬ì²´ì ìœ¼ë¡œ ì§ˆë¬¸í•´ì£¼ì‹œë©´ ì •í™•í•œ ë‹µë³€ì„ ë“œë¦´ ìˆ˜ ìˆì–´ìš”! ğŸ˜Š`;
                }

                setMessages([...messages, 
                    { role: 'user', content: inputMessage },
                    { role: 'assistant', content: response }
                ]);
                setInputMessage('');
            };

            // ë¡¤í”Œë ˆì‰ ì‹œë‚˜ë¦¬ì˜¤
            const scenarios = [
                { 
                    id: 1, 
                    title: 'ê³µí•­', 
                    icon: 'âœˆï¸', 
                    dialogues: [
                        { 
                            joy: "Hello! Welcome to the airport. May I see your passport and ticket, please?",
                            hints: ["Sure, here you are.", "Yes, here's my passport."],
                            feedback: "Great! ì—¬ê¶Œ ì œì‹œ í‘œí˜„ì„ ì˜ í•˜ì…¨ì–´ìš”."
                        },
                        { 
                            joy: "Thank you. Are you checking any bags today?",
                            hints: ["Yes, I have one suitcase.", "No, just carry-on."],
                            feedback: "Perfect! ìˆ˜í•˜ë¬¼ ë‹µë³€ì„ ì˜ í–ˆì–´ìš”."
                        },
                        { 
                            joy: "Here's your boarding pass. Have a nice flight!",
                            hints: ["Thank you!", "Have a good day!"],
                            feedback: "Excellent! ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‰"
                        }
                    ]
                },
                { 
                    id: 2, 
                    title: 'ì¹´í˜', 
                    icon: 'â˜•', 
                    dialogues: [
                        { 
                            joy: "Hi! What can I get for you today?",
                            hints: ["Can I get a latte, please?", "I'd like an Americano."],
                            feedback: "Good! ì£¼ë¬¸ í‘œí˜„ì„ ì˜ ì‚¬ìš©í–ˆì–´ìš”."
                        },
                        { 
                            joy: "Sure! What size?",
                            hints: ["Medium, please.", "Large size."],
                            feedback: "Perfect! ì‚¬ì´ì¦ˆë¥¼ ëª…í™•í•˜ê²Œ ë§í–ˆì–´ìš”."
                        },
                        { 
                            joy: "For here or to go?",
                            hints: ["For here, please.", "To go."],
                            feedback: "Great! ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰"
                        }
                    ]
                },
                { 
                    id: 3, 
                    title: 'í˜¸í…”', 
                    icon: 'ğŸ¨', 
                    dialogues: [
                        { 
                            joy: "Welcome! Do you have a reservation?",
                            hints: ["Yes, under Kim.", "I have a reservation."],
                            feedback: "Well done! ì˜ˆì•½ í™•ì¸ì„ ì˜ í–ˆì–´ìš”."
                        },
                        { 
                            joy: "May I have your ID, please?",
                            hints: ["Here you go.", "Sure, here it is."],
                            feedback: "Perfect! ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰"
                        }
                    ]
                },
                { 
                    id: 4, 
                    title: 'ì‡¼í•‘', 
                    icon: 'ğŸ›ï¸', 
                    dialogues: [
                        { 
                            joy: "Hello! Can I help you find anything?",
                            hints: ["I'm looking for a shirt.", "Just browsing, thanks."],
                            feedback: "Good! ë‹µë³€ì„ ì˜ í–ˆì–´ìš”."
                        },
                        { 
                            joy: "This one is on sale today. Would you like to try it?",
                            hints: ["Yes, please.", "Can I try it on?"],
                            feedback: "Great! ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰"
                        }
                    ]
                }
            ];

            const startScenario = (scenarioId) => {
                setSelectedScenario(scenarioId);
                setConversation([{
                    speaker: 'joy',
                    text: scenarios.find(s => s.id === scenarioId).dialogues[0].joy
                }]);
                setCurrentStep(0);
                setUserInput('');
            };

            const handleUserResponse = () => {
                if (!userInput.trim()) return;

                const scenario = scenarios.find(s => s.id === selectedScenario);
                const currentDialogue = scenario.dialogues[currentStep];

                const newConversation = [
                    ...conversation,
                    { speaker: 'user', text: userInput },
                    { speaker: 'feedback', text: currentDialogue.feedback }
                ];

                if (currentStep < scenario.dialogues.length - 1) {
                    const nextStep = currentStep + 1;
                    newConversation.push({
                        speaker: 'joy',
                        text: scenario.dialogues[nextStep].joy
                    });
                    setCurrentStep(nextStep);
                } else {
                    newConversation.push({
                        speaker: 'complete',
                        text: 'ğŸ‰ ì™„ë£Œ! ë‹¤ë¥¸ ìƒí™©ë„ ì—°ìŠµí•´ë³´ì„¸ìš”.'
                    });
                }

                setConversation(newConversation);
                setUserInput('');
            };

            return (
                <div className="space-y-4">
                    <h2 className="text-2xl font-bold text-gray-900">ğŸ’¬ Joyì™€ ëŒ€í™”í•˜ê¸°</h2>
                    
                    {/* íƒ­ */}
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200">
                        <div className="flex border-b border-gray-200">
                            <button
                                onClick={() => setActiveTab('chat')}
                                className={`flex-1 px-6 py-3 text-sm font-medium transition-colors ${
                                    activeTab === 'chat'
                                        ? 'bg-gray-900 text-white'
                                        : 'text-gray-600 hover:bg-gray-50'
                                }`}
                            >
                                ğŸ’¬ ììœ  ëŒ€í™”
                            </button>
                            <button
                                onClick={() => setActiveTab('roleplay')}
                                className={`flex-1 px-6 py-3 text-sm font-medium transition-colors ${
                                    activeTab === 'roleplay'
                                        ? 'bg-gray-900 text-white'
                                        : 'text-gray-600 hover:bg-gray-50'
                                }`}
                            >
                                ğŸ­ ìƒí™©ë³„ ì—°ìŠµ
                            </button>
                        </div>

                        {/* ììœ  ëŒ€í™” */}
                        {activeTab === 'chat' && (
                            <div className="p-4">
                                <div className="bg-blue-50 rounded-lg p-3 mb-4 border-l-4 border-blue-500">
                                    <p className="text-sm text-gray-700">
                                        <strong>ğŸ’¡ Tip:</strong> "ì‹ë‹¹ì—ì„œ", "ë°°ê³ íŒŒ", "ê³¼ê±°ì™„ë£Œ ì„¤ëª…í•´ì¤˜" ë“± ììœ ë¡­ê²Œ ì§ˆë¬¸í•˜ì„¸ìš”!
                                    </p>
                                </div>

                                <div className="bg-gray-50 rounded-lg p-4 h-[400px] overflow-y-auto space-y-3 mb-4">
                                    {messages.map((msg, idx) => (
                                        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`max-w-xl px-4 py-3 rounded-lg whitespace-pre-line ${
                                                msg.role === 'user' 
                                                    ? 'bg-gray-900 text-white' 
                                                    : 'bg-white text-gray-800 border border-gray-200'
                                            }`}>
                                                {msg.content}
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value={inputMessage}
                                        onChange={(e) => setInputMessage(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                                        placeholder="ì˜ˆ: ì‹ë‹¹ì—ì„œ, ë°°ê³ íŒŒ, ê³¼ê±°ì™„ë£Œ ì„¤ëª…í•´ì¤˜"
                                        className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900"
                                    />
                                    <button
                                        onClick={handleSendMessage}
                                        className="px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition font-medium"
                                    >
                                        ì „ì†¡
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* ìƒí™©ë³„ ì—°ìŠµ (ë¡¤í”Œë ˆì‰) */}
                        {activeTab === 'roleplay' && (
                            <div className="p-4">
                                {!selectedScenario ? (
                                    <>
                                        <div className="bg-blue-50 rounded-lg p-3 mb-4 border-l-4 border-blue-500">
                                            <p className="text-sm text-gray-700">
                                                <strong>ğŸ’¡ Tip:</strong> ìƒí™©ì„ ì„ íƒí•˜ê³  ì‹¤ì „ì²˜ëŸ¼ ëŒ€í™”ë¥¼ ì—°ìŠµí•˜ì„¸ìš”!
                                            </p>
                                        </div>

                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                            {scenarios.map((scenario) => (
                                                <button
                                                    key={scenario.id}
                                                    onClick={() => startScenario(scenario.id)}
                                                    className="p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-gray-900 hover:shadow-md transition text-center"
                                                >
                                                    <div className="text-4xl mb-2">{scenario.icon}</div>
                                                    <div className="text-sm font-medium text-gray-900">{scenario.title}</div>
                                                </button>
                                            ))}
                                        </div>
                                    </>
                                ) : (
                                    <>
                                        <div className="flex items-center justify-between mb-4">
                                            <h3 className="text-lg font-bold text-gray-900">
                                                {scenarios.find(s => s.id === selectedScenario).icon} {scenarios.find(s => s.id === selectedScenario).title}
                                            </h3>
                                            <button
                                                onClick={() => {
                                                    setSelectedScenario(null);
                                                    setConversation([]);
                                                }}
                                                className="text-sm text-gray-600 hover:text-gray-900"
                                            >
                                                â† ë‹¤ë¥¸ ìƒí™© ì„ íƒ
                                            </button>
                                        </div>

                                        <div className="bg-gray-50 rounded-lg p-4 h-[350px] overflow-y-auto space-y-3 mb-4">
                                            {conversation.map((msg, idx) => (
                                                <div key={idx}>
                                                    {msg.speaker === 'joy' && (
                                                        <div className="flex justify-start">
                                                            <div className="bg-white px-4 py-3 rounded-lg border border-gray-200 max-w-xl">
                                                                <div className="text-xs text-gray-500 mb-1">Joy:</div>
                                                                <div className="text-gray-800">{msg.text}</div>
                                                            </div>
                                                        </div>
                                                    )}
                                                    {msg.speaker === 'user' && (
                                                        <div className="flex justify-end">
                                                            <div className="bg-gray-900 px-4 py-3 rounded-lg text-white max-w-xl">
                                                                {msg.text}
                                                            </div>
                                                        </div>
                                                    )}
                                                    {msg.speaker === 'feedback' && (
                                                        <div className="flex justify-center">
                                                            <div className="bg-green-50 px-4 py-2 rounded-lg border border-green-200 text-sm text-green-700">
                                                                âœ“ {msg.text}
                                                            </div>
                                                        </div>
                                                    )}
                                                    {msg.speaker === 'complete' && (
                                                        <div className="flex justify-center">
                                                            <div className="bg-blue-50 px-6 py-3 rounded-lg border border-blue-200 text-blue-700 font-medium">
                                                                {msg.text}
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>

                                        {conversation.length > 0 && !conversation[conversation.length - 1].text.includes('ì™„ë£Œ') && (
                                            <>
                                                <div className="bg-yellow-50 rounded-lg p-3 mb-3 border-l-4 border-yellow-400">
                                                    <p className="text-xs text-gray-600 mb-1">íŒíŠ¸:</p>
                                                    <div className="text-sm text-gray-700 space-y-1">
                                                        {scenarios.find(s => s.id === selectedScenario).dialogues[currentStep].hints.map((hint, idx) => (
                                                            <div key={idx}>â€¢ {hint}</div>
                                                        ))}
                                                    </div>
                                                </div>

                                                <div className="flex gap-2">
                                                    <input
                                                        type="text"
                                                        value={userInput}
                                                        onChange={(e) => setUserInput(e.target.value)}
                                                        onKeyPress={(e) => e.key === 'Enter' && handleUserResponse()}
                                                        placeholder="ì˜ì–´ë¡œ ë‹µë³€í•˜ì„¸ìš”..."
                                                        className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900"
                                                    />
                                                    <button
                                                        onClick={handleUserResponse}
                                                        className="px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition font-medium"
                                                    >
                                                        ì „ì†¡
                                                    </button>
                                                </div>
                                            </>
                                        )}
                                    </>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function MyPage({ learningLevel, onLevelChange }) {
            const [showLevelModal, setShowLevelModal] = useState(false);

            const handleLevelChangeClick = (level) => {
                onLevelChange(level);
                setShowLevelModal(false);
            };

            const getLevelIcon = (level) => {
                if (level === 'ì´ˆê¸‰') return 'ğŸŒ±';
                if (level === 'ì¤‘ê¸‰') return 'ğŸŒ¿';
                if (level === 'ê³ ê¸‰') return 'ğŸŒ³';
                return 'ğŸ“š';
            };

            return (
                <div className="space-y-6">
                    <h2 className="text-3xl font-bold text-gray-800 mb-6">ğŸ‘¤ ë§ˆì´ í˜ì´ì§€</h2>
                    
                    {/* Level Change Modal */}
                    {showLevelModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
                                <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">
                                    í•™ìŠµ ë ˆë²¨ ë³€ê²½
                                </h3>
                                <div className="space-y-3">
                                    <button
                                        onClick={() => handleLevelChangeClick('ì´ˆê¸‰')}
                                        className="w-full p-4 bg-green-50 border-2 border-green-500 rounded-lg hover:bg-green-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-green-700">ğŸŒ± ì´ˆê¸‰ (Beginner)</div>
                                        <div className="text-sm text-gray-600 mt-1">ì˜ì–´ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ì‹œëŠ” ë¶„</div>
                                    </button>
                                    <button
                                        onClick={() => handleLevelChangeClick('ì¤‘ê¸‰')}
                                        className="w-full p-4 bg-blue-50 border-2 border-blue-500 rounded-lg hover:bg-blue-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-blue-700">ğŸŒ¿ ì¤‘ê¸‰ (Intermediate)</div>
                                        <div className="text-sm text-gray-600 mt-1">ê¸°ë³¸ì ì¸ ì˜ì‚¬ì†Œí†µì´ ê°€ëŠ¥í•˜ì‹  ë¶„</div>
                                    </button>
                                    <button
                                        onClick={() => handleLevelChangeClick('ê³ ê¸‰')}
                                        className="w-full p-4 bg-purple-50 border-2 border-purple-500 rounded-lg hover:bg-purple-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-purple-700">ğŸŒ³ ê³ ê¸‰ (Advanced)</div>
                                        <div className="text-sm text-gray-600 mt-1">ìœ ì°½í•œ ëŒ€í™”ê°€ ê°€ëŠ¥í•˜ì‹  ë¶„</div>
                                    </button>
                                    <button
                                        onClick={() => setShowLevelModal(false)}
                                        className="w-full mt-4 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition"
                                    >
                                        ì·¨ì†Œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    <div className="bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white">
                        <div className="flex items-center space-x-4">
                            <div className="w-20 h-20 bg-white rounded-full flex items-center justify-center text-4xl">
                                ğŸ‘¤
                            </div>
                            <div>
                                <h3 className="text-2xl font-bold">ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ì</h3>
                                <p className="opacity-90">guest@example.com</p>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div className="bg-white border border-gray-200 rounded-lg p-6">
                            <h4 className="text-xl font-semibold text-gray-800 mb-4">ğŸ“ˆ í˜„ì¬ í•™ìŠµ ë ˆë²¨</h4>
                            <div className="text-4xl font-bold text-blue-600 mb-2">
                                {getLevelIcon(learningLevel)} {learningLevel || 'ë¯¸ì„¤ì •'}
                            </div>
                            {learningLevel && (
                                <>
                                    <div className="mt-4 bg-gray-200 rounded-full h-3">
                                        <div className="bg-blue-600 h-3 rounded-full" style={{width: '65%'}}></div>
                                    </div>
                                    <p className="text-sm text-gray-600 mt-2">ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ 35%</p>
                                </>
                            )}
                        </div>

                        <div className="bg-white border border-gray-200 rounded-lg p-6">
                            <h4 className="text-xl font-semibold text-gray-800 mb-4">ğŸ† íšë“í•œ ë°°ì§€</h4>
                            <div className="flex gap-3 flex-wrap">
                                <div className="text-4xl" title="ì²« í•™ìŠµ ì™„ë£Œ">ğŸ¯</div>
                                <div className="text-4xl" title="ë‹¨ì–´ ë§ˆìŠ¤í„°">ğŸ“š</div>
                                <div className="text-4xl" title="ì—°ì† í•™ìŠµ">ğŸ”¥</div>
                                <div className="text-4xl" title="ìš°ìˆ˜ í•™ìŠµì">â­</div>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white border border-gray-200 rounded-lg p-6">
                        <h4 className="text-xl font-semibold text-gray-800 mb-4">âš™ï¸ ì„¤ì •</h4>
                        <div className="space-y-3">
                            <button 
                                onClick={() => setShowLevelModal(true)}
                                className="w-full text-left px-4 py-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition border-2 border-blue-200 font-medium text-blue-700"
                            >
                                ğŸ¯ í•™ìŠµ ë‹¨ê³„ ì„¤ì •
                            </button>
                            <button className="w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition">
                                ğŸ”” ì•Œë¦¼ ì„¤ì •
                            </button>
                            <button className="w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition">
                                ğŸ“ í•™ìŠµ ëª©í‘œ ë³€ê²½
                            </button>
                            <button className="w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition">
                                ğŸ‘¤ ê³„ì • ì„¤ì •
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë“¤
        function GrowthReport() {
            const [weeklyData, setWeeklyData] = useState([10, 25, 35, 45, 60, 75, 90]);
            
            return (
                <div className="space-y-6">
                    <h2 className="text-3xl font-bold text-gray-800 mb-6">ğŸ“ˆ ì„±ì¥ ë¦¬í¬íŠ¸</h2>
                    
                    <div className="bg-white rounded-lg p-6 shadow-sm border border-gray-200 border-l-4 border-l-pink-500">
                        <h3 className="text-xl font-bold mb-2 text-gray-900">ğŸ‰ Joyê°€ ë§í•´ìš”!</h3>
                        <p className="text-base text-gray-700">"ì´ë²ˆ ì£¼ ì •ë§ ì—´ì‹¬íˆ í•˜ì…¨ì–´ìš”! ì§€ë‚œ ì£¼ë³´ë‹¤ 20% ë” ì„±ì¥í–ˆë‹µë‹ˆë‹¤!"</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card">
                            <div className="text-pink-500 text-4xl mb-2">ğŸ“š</div>
                            <div className="text-2xl font-bold text-gray-800">45ê°œ</div>
                            <div className="text-gray-600">ì´ë²ˆ ì£¼ í•™ìŠµí•œ ë‹¨ì–´</div>
                        </div>
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card">
                            <div className="text-orange-500 text-4xl mb-2">â±ï¸</div>
                            <div className="text-2xl font-bold text-gray-800">3ì‹œê°„ 20ë¶„</div>
                            <div className="text-gray-600">ì´ë²ˆ ì£¼ í•™ìŠµ ì‹œê°„</div>
                        </div>
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card">
                            <div className="text-yellow-500 text-4xl mb-2">ğŸ¯</div>
                            <div className="text-2xl font-bold text-gray-800">12ê°œ</div>
                            <div className="text-gray-600">ì™„ë£Œí•œ ëª©í‘œ</div>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl p-6 shadow-lg">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">ì£¼ê°„ í•™ìŠµ ì§„ë„</h3>
                        <div className="space-y-3">
                            {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map((day, idx) => (
                                <div key={day} className="flex items-center gap-3">
                                    <div className="w-12 text-gray-600 font-medium">{day}</div>
                                    <div className="flex-1 bg-gray-200 rounded-full h-4">
                                        <div 
                                            className="bg-pink-500 h-4 rounded-full transition-all"
                                            style={{width: `${weeklyData[idx]}%`}}
                                        />
                                    </div>
                                    <div className="w-12 text-right font-bold text-gray-700">{weeklyData[idx]}%</div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white rounded-xl p-6 shadow-lg">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">ğŸ† íšë“í•œ ë°°ì§€</h3>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            {[
                                { emoji: 'ğŸŒ±', name: 'ì²« ê±¸ìŒ', desc: 'ì²« í•™ìŠµ ì™„ë£Œ' },
                                { emoji: 'ğŸ”¥', name: 'ì—°ì† í•™ìŠµ', desc: '7ì¼ ì—°ì†' },
                                { emoji: 'â­', name: 'ë‹¨ì–´ ë§ˆìŠ¤í„°', desc: '100ë‹¨ì–´ í•™ìŠµ' },
                                { emoji: 'ğŸ’¬', name: 'ëŒ€í™”ì™•', desc: 'AI íŠœí„° 10íšŒ' }
                            ].map((badge, idx) => (
                                <div key={idx} className="text-center p-4 bg-gradient-to-br from-pink-50 to-orange-50 rounded-xl joy-card">
                                    <div className="text-5xl mb-2">{badge.emoji}</div>
                                    <div className="font-bold text-gray-800">{badge.name}</div>
                                    <div className="text-xs text-gray-600 mt-1">{badge.desc}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }


        function Community() {
            return (
                <div className="space-y-6">
                    <h2 className="text-3xl font-bold text-gray-800 mb-6">ğŸŒ ì»¤ë®¤ë‹ˆí‹°</h2>
                    
                    <div className="bg-white rounded-lg p-5 shadow-sm border border-gray-200 border-l-4 border-l-pink-500">
                        <h3 className="text-xl font-bold mb-2 text-gray-900">í•¨ê»˜ ì„±ì¥í•´ìš”! ğŸŒŸ</h3>
                        <p className="text-sm text-gray-700">ë‹¤ë¥¸ í•™ìŠµìë“¤ê³¼ ê²½í—˜ì„ ê³µìœ í•˜ê³  í•¨ê»˜ ì˜ì–´ ì‹¤ë ¥ì„ í‚¤ì›Œê°€ìš”!</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card text-center">
                            <div className="text-5xl mb-3">ğŸ“</div>
                            <h3 className="text-xl font-bold text-gray-800 mb-2">í•™ìŠµ í›„ê¸°</h3>
                            <p className="text-gray-600 mb-4">ë‚˜ì˜ í•™ìŠµ ê²½í—˜ì„ ê³µìœ í•´ë³´ì„¸ìš”</p>
                            <button className="px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition">
                                í›„ê¸° ì“°ê¸°
                            </button>
                        </div>
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card text-center">
                            <div className="text-5xl mb-3">ğŸ†</div>
                            <h3 className="text-xl font-bold text-gray-800 mb-2">ì±Œë¦°ì§€</h3>
                            <p className="text-gray-600 mb-4">ë‹¤ë¥¸ í•™ìŠµìë“¤ê³¼ í•¨ê»˜ ë„ì „!</p>
                            <button className="px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition">
                                ì°¸ì—¬í•˜ê¸°
                            </button>
                        </div>
                        <div className="bg-white rounded-xl p-6 shadow-lg joy-card text-center">
                            <div className="text-5xl mb-3">ğŸ’­</div>
                            <h3 className="text-xl font-bold text-gray-800 mb-2">Q&A</h3>
                            <p className="text-gray-600 mb-4">ê¶ê¸ˆí•œ ì ì„ ì§ˆë¬¸í•˜ì„¸ìš”</p>
                            <button className="px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition">
                                ì§ˆë¬¸í•˜ê¸°
                            </button>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl p-6 shadow-lg">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">ìµœê·¼ ê²Œì‹œê¸€</h3>
                        <div className="space-y-4">
                            {[
                                { title: '3ê°œì›” ë§Œì— í† ìµ 200ì  ì˜¬ë ¸ì–´ìš”!', author: 'ì˜ì–´ì¡°ì•„', likes: 24, comments: 8 },
                                { title: 'Joyì™€ í•¨ê»˜í•œ 30ì¼ í›„ê¸°', author: 'ê¾¸ì¤€ì´', likes: 18, comments: 5 },
                                { title: 'ë°œìŒ êµì • íŒ ê³µìœ í•©ë‹ˆë‹¤', author: 'ë°œìŒì™•', likes: 15, comments: 12 }
                            ].map((post, idx) => (
                                <div key={idx} className="p-4 border border-gray-200 rounded-lg hover:border-pink-300 transition cursor-pointer">
                                    <h4 className="font-bold text-gray-800 mb-2">{post.title}</h4>
                                    <div className="flex items-center gap-4 text-sm text-gray-600">
                                        <span>{post.author}</span>
                                        <span>â¤ï¸ {post.likes}</span>
                                        <span>ğŸ’¬ {post.comments}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Main App Component
        function App() {
            const [currentView, setCurrentView] = useState('dashboard');
            const [learningLevel, setLearningLevel] = useState(localStorage.getItem('learningLevel') || '');
            const [showLevelSelector, setShowLevelSelector] = useState(!localStorage.getItem('learningLevel'));

            const handleLevelSelect = (level) => {
                setLearningLevel(level);
                localStorage.setItem('learningLevel', level);
                setShowLevelSelector(false);
                
                // í¬ì¸íŠ¸ ì´ˆê¸°í™”
                if (!localStorage.getItem('joyPoints')) {
                    localStorage.setItem('joyPoints', '0');
                }
            };

            return (
                <main className="min-h-screen bg-gradient-to-br from-gray-100 to-gray-50">
                    {/* Level Selection Modal */}
                    {showLevelSelector && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl">
                                <div className="text-center mb-6">
                                    <div className="text-7xl mb-4 joy-float">ğŸ˜Š</div>
                                    <h2 className="text-4xl font-bold joy-text-gradient mb-3">
                                        JoyTalkì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•´ìš”!
                                    </h2>
                                    <p className="text-gray-600">
                                        í•™ìŠµ ë ˆë²¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”<br/>
                                        <span className="text-sm">(ë‚˜ì¤‘ì— ì„¤ì •ì—ì„œ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”)</span>
                                    </p>
                                </div>
                                <div className="space-y-3">
                                    <button
                                        onClick={() => handleLevelSelect('ì´ˆê¸‰')}
                                        className="w-full p-4 bg-green-50 border-2 border-green-500 rounded-lg hover:bg-green-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-green-700">ğŸŒ± ì´ˆê¸‰ (Beginner)</div>
                                        <div className="text-sm text-gray-600 mt-1">ì˜ì–´ë¥¼ ì²˜ìŒ ì‹œì‘í•˜ì‹œëŠ” ë¶„</div>
                                    </button>
                                    <button
                                        onClick={() => handleLevelSelect('ì¤‘ê¸‰')}
                                        className="w-full p-4 bg-blue-50 border-2 border-blue-500 rounded-lg hover:bg-blue-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-blue-700">ğŸŒ¿ ì¤‘ê¸‰ (Intermediate)</div>
                                        <div className="text-sm text-gray-600 mt-1">ê¸°ë³¸ì ì¸ ì˜ì‚¬ì†Œí†µì´ ê°€ëŠ¥í•˜ì‹  ë¶„</div>
                                    </button>
                                    <button
                                        onClick={() => handleLevelSelect('ê³ ê¸‰')}
                                        className="w-full p-4 bg-purple-50 border-2 border-purple-500 rounded-lg hover:bg-purple-100 transition text-left"
                                    >
                                        <div className="font-bold text-lg text-purple-700">ğŸŒ³ ê³ ê¸‰ (Advanced)</div>
                                        <div className="text-sm text-gray-600 mt-1">ìœ ì°½í•œ ëŒ€í™”ê°€ ê°€ëŠ¥í•˜ì‹  ë¶„</div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* JoyTalk Header */}
                    <header className="bg-white shadow-sm border-b border-gray-200">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center h-16">
                                <div className="flex items-center gap-3">
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-900">
                                            JoyTalk
                                        </h1>
                                        <p className="text-xs text-gray-500">ì¦ê±°ìš´ ì˜ì–´ í•™ìŠµ</p>
                                    </div>
                                    {learningLevel && (
                                        <span className="ml-3 px-3 py-1 bg-pink-50 text-pink-600 rounded-full text-xs font-medium border border-pink-200">
                                            {learningLevel}
                                        </span>
                                    )}
                                </div>
                                <div className="flex items-center space-x-1">
                                    <nav className="flex space-x-1">
                                        <button
                                            onClick={() => setCurrentView('dashboard')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'dashboard'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸ  í™ˆ
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('vocabulary')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'vocabulary'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸ“– ë‹¨ì–´
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('ai-tutor')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'ai-tutor'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸ’¬ ëŒ€í™”
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('growth')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'growth'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸ“ˆ ì„±ì¥
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('community')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'community'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸŒ ì»¤ë®¤ë‹ˆí‹°
                                        </button>
                                        <button
                                            onClick={() => setCurrentView('mypage')}
                                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${
                                                currentView === 'mypage'
                                                    ? 'bg-gray-900 text-white'
                                                    : 'text-gray-600 hover:bg-gray-100'
                                            }`}
                                        >
                                            ğŸ‘¤ MY
                                        </button>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {currentView === 'dashboard' && <StudyDashboard />}
                        {currentView === 'vocabulary' && <VocabularyLearning />}
                        {currentView === 'ai-tutor' && <AITutorChat />}
                        {currentView === 'growth' && <GrowthReport />}
                        {currentView === 'community' && <Community />}
                        {currentView === 'mypage' && <MyPage learningLevel={learningLevel} onLevelChange={handleLevelSelect} />}
                    </div>

                    {/* Footer */}
                    <footer className="bg-white border-t border-gray-200 mt-12 py-8">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <h3 className="text-xl font-bold text-gray-900 mb-2">JoyTalk</h3>
                            <p className="text-sm text-gray-600 mb-1">ì¦ê±°ìš´ ì˜ì–´ í•™ìŠµ, Joyì™€ í•¨ê»˜í•˜ì„¸ìš”!</p>
                            <p className="text-xs text-gray-500 mb-4">Joyful, Consistent Learning</p>
                            <div className="text-xs text-gray-400">
                                Â© 2024 JoyTalk. Learn with Joy, Speak with Confidence.
                            </div>
                        </div>
                    </footer>
                </main>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
